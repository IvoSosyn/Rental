<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <style type="text/css">
        .ui-text-red {
            color: #c61e40;
        }
    </style>
    <h:body>
        <ui:composition>	
            <div class="ui-g">
                <div class="ui-g-7">
                    <h:form id="formModelTree">
                        <p:growl id="messages" showDetail="true" />                
                        <p:panelGrid columns="1">
                            <f:facet name="header">
                                Entita (Objekt evidence)
                            </f:facet>
                            <p:tree id="modelTree" value="#{modelTree.root}" var="treeNode"  selectionMode="single"
                                    selection="#{modelTree.selectedNode}" tabindex="3">
                                <p:ajax event="select" update=":formModelTreeDetail:gridDetail :formModelTreeDetailButtons:addTypentity :formModelTreeDetailButtons:delTypentity" listener="#{modelTree.onNodeSelect}" >
                                    <f:attribute name="treeNode" value="#{treeNode}" />
                                </p:ajax>
                                <p:ajax event="select" update=":formModelTable :formModelDetail" listener="#{modelTable.onNodeSelect}" >
                                    <f:attribute name="treeNode" value="#{treeNode}" />
                                </p:ajax>
                                <p:ajax event="unselect" update=":formModelTable :formModelDetail" listener="#{modelTable.onNodeUnselect}" >
                                    <f:attribute name="treeNode" value="#{treeNode}" />
                                </p:ajax>

                                <p:treeNode expandedIcon="pi pi-folder-open" collapsedIcon="pi pi-folder">
                                    <h:outputText value="#{treeNode}"/>
                                </p:treeNode>

                                <p:treeNode type="document" icon="pi pi-file">
                                    <h:outputText value="#{treeNode}" />
                                </p:treeNode>

                                <p:treeNode type="picture" icon="pi pi-image">
                                    <h:outputText value="#{treeNode}" />
                                </p:treeNode>

                                <p:treeNode type="mp3" icon="pi pi-video">
                                    <h:outputText value="#{treeNode}" />
                                </p:treeNode>
                            </p:tree>
                        </p:panelGrid>
                        <p:contextMenu for="modelTree">
                            <p:menuitem value="View" update="messages" action="#{modelTree.displaySelectedSingle}" icon="pi pi-search" />
                            <p:menuitem value="Delete" update="modelTree" action="#{modelTree.deleteNode}" icon="pi pi-times"/>
                        </p:contextMenu>
                    </h:form>
                </div>
                <div class="ui-g-1">
                    <h:form id="formModelTreeDetailButtons">
                        <p:commandButton id="addTypentity" value="Přidej" process="@this" actionListener="#{modelTree.addTypentity}" update=":formModelTree:modelTree :formModelTreeDetail:gridDetail" icon="fa fa-plus" partialSubmit="true" title="Nová entita (uzel)" />
                        <p:commandButton id="delTypentity" value="Smaž" process="@this" partialSubmit="true" icon="fa fa-ban" title="Smazání entity (uzlu)"  style="color: #c61e40;" disabled="#{modelTree.typentity.attrsystem}" />                        
                    </h:form>
                </div>  
            </div>
            <div class="ui-g">
                <div class="ui-g-8">
                    <h:form id="formModelTreeDetail">
                        <p:panelGrid id="gridDetail" columns="2">
                            <f:facet name="header">
                                Detail entity #{modelTree.typentity.newEntity?"NOVÁ":""}
                            </f:facet>
                            <h:outputText value="Zkratka:"  />
                            <p:inputText id="idTypentity" value="#{modelTree.typentity.typentity}" disabled="#{modelTree.typentity eq null}" >
                                <p:ajax process="idTypentity" event="valueChange" listener="#{modelTree.valueChange(modelTree.typentity.typentity)}" />
                                <f:param name="fieldName" value="modelTree.typentity.typentity" />
                                <f:param name="fieldValue" value="#{modelTree.typentity.typentity}" />
                                <f:param name="typEntity.id" value="#{modelTree.typentity.id}" />
                            </p:inputText>
                            <h:outputText value="Popis:"  />
                            <p:inputText id="idPopis" value="#{modelTree.typentity.popis}"  disabled="#{modelTree.typentity eq null}"  > 
                                <p:ajax process="idPopis" event="valueChange" listener="#{modelTree.valueChange(modelTree.typentity.popis)}" />
                                <f:param name="fieldName" value="modelTree.typentity.popis" />
                                <f:param name="fieldValue" value="#{modelTree.typentity.popis}" />
                                <f:param name="typEntity.id" value="#{modelTree.typentity.id}" />
                            </p:inputText>
                            <h:outputText value="Platí Od:" />
                            <p:datePicker value="#{modelTree.typentity.platiod}"  disabled="#{modelTree.typentity eq null}"  title=" Prázdné pole(neomezeně) nebo OD kdy položka platí" />
                            <h:outputText value="Do:" />
                            <p:datePicker value="#{modelTree.typentity.platido}"  disabled="#{modelTree.typentity eq null}" title=" Prázdné pole (neomezeně) nebo DO kdy položka platí" />
                            <h:outputText value="Systém:" />
                            <h:selectBooleanCheckbox value="#{modelTree.typentity.attrsystem}" disabled="true" />
                        </p:panelGrid>
                    </h:form>
                </div>
            </div>
        </ui:composition>
    </h:body>
</html>

